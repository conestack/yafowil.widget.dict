!function(t,e){"use strict";class i{static initialize(t){e("table.dictwidget",t).each((function(){new i(e(this))}))}constructor(t){this.elem=t,t.data("dict",this);let i=e("> thead .dict_actions",t),a=this.add_first_handle.bind(this);e("a.dict_row_add",i).off().on("click",a),this.bind_actions()}bind_actions(){let t=e("> tbody > tr > td.actions .dict_actions",this.elem),i=this.add_handle.bind(this),a=this.remove_handle.bind(this),s=this.up_handle.bind(this),r=this.down_handle.bind(this);this.mark_disabled(t),e("a.dict_row_add",t).off().on("click",i),e("a.dict_row_remove",t).off().on("click",a),e("a.dict_row_up",t).off().on("click",s),e("a.dict_row_down",t).off().on("click",r)}mark_disabled(t){e("a.dict_row_up",t).removeClass("dict_row_up_disabled").first().addClass("dict_row_up_disabled"),e("a.dict_row_down",t).removeClass("dict_row_down_disabled").last().addClass("dict_row_down_disabled")}row_class(t,e){for(let t of this.elem.attr("class").split(" "))if(t.substring(0,e.length)==e)return t.substring(e.length+1,t.length);return""}create_row(t){let e="";return e+="<tr>",e+='<td class="key">',e+='<input type="text" class="'+this.row_class(t,"key")+'" value="" />',e+="</td>",e+='<td class="value">',e+='<input type="text" class="'+this.row_class(t,"value")+'" value="" />',e+="</td>",e+='<td class="actions">',e+='<div class="dict_actions">',e+='<a class="dict_row_add" href="#">',e+='<span class="icon-plus-sign"> </span>',e+="</a>",e+='<a class="dict_row_remove" href="#">',e+='<span class="icon-minus-sign"> </span>',e+="</a>",e+='<a class="dict_row_up" href="#">',e+='<span class="icon-circle-arrow-up"> </span>',e+="</a>",e+='<a class="dict_row_down" href="#">',e+='<span class="icon-circle-arrow-down"> </span>',e+="</a>",e+="</div>",e+="</td>",e+="</tr>",e}get_row(t){return e(t).parent().parent().parent()}get base_name(){let t=this.elem.attr("id");return t.substring(11,t.length)}reset_indices(t){var i=0,a=this.base_name,s=a.replace(/\./g,"-");e("tr",t).each((function(){let t=e(this),r=e("td.key input",t),n=s+i+"-key",d=a+i+".key";r.attr("id",n).attr("name",d);let l=e("td.value input",t),c=s+i+"-value",o=a+i+".value";l.attr("id",c).attr("name",o),i++})),this.bind_actions()}add_first_handle(t){t.preventDefault();let i=this.create_row(t.currentTarget),a=e("> tbody",this.elem);a.prepend(i),this.reset_indices(a)}add_handle(t){t.preventDefault();let e=t.currentTarget,i=this.get_row(e),a=this.create_row(e),s=i.parent();i.after(a),this.reset_indices(s)}remove_handle(t){t.preventDefault();let e=this.get_row(t.currentTarget),i=e.parent();e.remove(),this.reset_indices(i)}up_handle(t){t.preventDefault();let e=this.get_row(t.currentTarget);e.insertBefore(e.prev()),this.reset_indices(e.parent())}down_handle(t){t.preventDefault();let e=this.get_row(t.currentTarget);e.insertAfter(e.next()),this.reset_indices(e.parent())}}e((function(){void 0!==window.ts?ts.ajax.register(i.initialize,!0):i.initialize(),void 0!==window.yafowil.array&&e.extend(yafowil.array.hooks.add,{dictwidget_binder:i.initialize})})),t.DictWidget=i,Object.defineProperty(t,"__esModule",{value:!0}),void 0===window.yafowil&&(window.yafowil={}),window.yafowil.dict=t}({},jQuery);
//# sourceMappingURL=widget.min.js.map
